<!-- Simple Navigation with Clean Counters -->
{% assign new_games = 0 %}
{% assign new_blogs = 0 %}

<!-- Count recent games -->
{% if site.games %}
  {% for game in site.games limit: 10 %}
    {% if game.date %}
      {% assign days = 'now' | date: '%s' | minus: game.date | date: '%s' | divided_by: 86400 %}
      {% if days <= 14 %}
        {% assign new_games = new_games | plus: 1 %}
      {% endif %}
    {% endif %}
  {% endfor %}
{% endif %}

<!-- Count recent blogs -->
{% if site.blog_posts %}
  {% for post in site.blog_posts limit: 10 %}
    {% if post.date %}
      {% assign days = 'now' | date: '%s' | minus: post.date | date: '%s' | divided_by: 86400 %}
      {% if days <= 14 %}
        {% assign new_blogs = new_blogs | plus: 1 %}
      {% endif %}
    {% endif %}
  {% endfor %}
{% elsif site.posts %}
  {% for post in site.posts limit: 10 %}
    {% if post.date %}
      {% assign days = 'now' | date: '%s' | minus: post.date | date: '%s' | divided_by: 86400 %}
      {% if days <= 14 %}
        {% assign new_blogs = new_blogs | plus: 1 %}
      {% endif %}
    {% endif %}
  {% endfor %}
{% endif %}

<nav class="container navbar navbar-expand-lg navbar-light bg-transparent">
  <a class="navbar-brand" href={{"/" | relative_url}}>üïπÔ∏èsublevelgames</a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <!-- Í≤ÄÏÉâ Ìèº -->
    <div class="search-wrapper mr-auto">
      <input type="text" id="search-input" class="form-control" placeholder="Search games...">
      <ul id="results-container" class="search-results"></ul>
    </div>

    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href={{"/" | relative_url}}>
          Games{% if new_games > 0 %} <small class="text-success font-weight-bold">({{ new_games }})</small>{% endif %}
          <span class="sr-only">(current)</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={{"/blogs/" | relative_url}}>
          Blogs{% if new_blogs > 0 %} <small class="text-primary font-weight-bold">({{ new_blogs }})</small>{% endif %}
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={{"/tags/" | relative_url}}>Tags</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href={{"/about/" | relative_url}}>About</a>
      </li>
    </ul>
  </div>

  <!-- Simple Jekyll Search Ïä§ÌÅ¨Î¶ΩÌä∏ -->
  <script src="https://unpkg.com/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var sjs = SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '{{ "/search.json" | relative_url }}',
        searchResultTemplate: '<li><a href="{url}">{title}</a> <small>{tags}</small></li>',
        noResultsText: 'No results found',
        limit: 10,
        fuzzy: false
      });
    });
  </script>
</nav>

<style>
/* Simple counter styling using Bootstrap classes */
.nav-link small {
  font-size: 0.75rem;
  vertical-align: top;
  margin-left: 0.2rem;
}

/* Subtle animation */
.nav-link small {
  transition: all 0.2s ease;
}

.nav-link:hover small {
  transform: scale(1.1);
}
</style>